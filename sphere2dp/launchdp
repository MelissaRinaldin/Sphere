#!/bin/bash

rm spheredp
rm *.dat
rm *.png
gcc  -o spheredp spheredp.c -O3 -lm
./spheredp << EOF
1
20
10
4000
3
1
1
.45
$RANDOM
EOF

gnuplot <<EOF
	set autoscale
	unset log
	unset label
	set xtic auto				  
	set ytic auto
	set title "Error propagation over time"
	set xlabel "Time"
	set ylabel "Field mean value"
	set term png crop medium size 1200,800
	set out 'hi.png'
	plot    "hi.dat" u 1:2 title 'c0' with linespoints
	unset log
	unset label
	set xtic auto				  
	set ytic auto
	set title "DD over time"
	set xlabel "Time"
	set ylabel "DD"
	set term png crop medium size 1200,800
	set out 'hi2.png'
	plot    "hi.dat" u 1:3 title 'DD(phi,Ntheta,Nphi)' with linespoints
	unset log
	unset label
	set xtic auto				  
	set ytic auto
	set title "u over time"
	set xlabel "Time"
	set ylabel "u"
	set term png crop medium size 1200,800
	set out 'hi3.png'
	plot    "hi.dat" u 1:4 title 'u(phi,Ntheta,Nphi)' with linespoints
	unset log
	unset label
	set xtic auto				  
	set ytic auto
	set title "polar phi over time"
	set xlabel "Time"
	set ylabel "phi"
	set term png crop medium size 1200,800
	set out 'hi4.png'
	plot    "hi.dat" u 1:5 title 'phi(phi,Ntheta,Nphi)' with linespoints
	unset log
	unset label
	set xtic auto				  
	set ytic auto
	set title "middle phi over time"
	set xlabel "Time"
	set ylabel "phi"
	set term png crop medium size 1200,800
	set out 'hi5.png'
	plot    "hi.dat" u 1:6 title 'phi(phi,Ntheta/2,Nphi)' with linespoints
EOF
#nohup eog hi.png  &>/dev/null &
nohup eog hi2.png  &>/dev/null &
wmctrl -r "hi2.png" -b toggle,above 
#cat hi.dat








